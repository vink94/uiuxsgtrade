<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Base CSS -->
        <link rel="stylesheet" href="assets/css/basestyle/style.css">

        <!-- Material Icons -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <title> IS428: SG Trade Visualization </title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600">
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
    </head>

    <body>
        <!-- Pre Loader-->
        <div class="loader-wrapper">
            <div class="spinner">
                <svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle class="length" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="28"></circle>
                </svg>
                <svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="28"></circle>
                </svg>
                <svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="28"></circle>
                </svg>
                <svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="28"></circle>
                </svg>
            </div>
        </div>
        <!-- Pre Loader-->

        <section class="wrapper">
            <!-- SIDEBAR -->
            <aside class="sidebar sidebar-light">
                <nav class="navbar navbar-light bg-white">
                    <a class="navbar-brand m-0 py-2 brand-title" href="#"> Visual Analytics </a>
                    <span></span>
                    <a class="navbar-brand py-2 material-icons toggle-sidebar" href="#">menu</a>
                </nav>

                <nav class="navigation">
                    <ul>
                        <li class=""><a href="index.html" title="Dashboard"><span class="nav-icon material-icons">public</span> Home </a></li>
                        <li class=""><a href="SGImportExport.html"><span class="nav-icon material-icons "> card_travel </span> SG Trades </a></li>
                        <li class="active"><a href="ASEANTrades.html"><span class="nav-icon material-icons ">score</span> ASEAN Trades </a></li>
                        <li class=""><a href="SGTrade.html"><span class="nav-icon material-icons ">score</span> SG Trade </a></li>
                    </ul>
                </nav>

            </aside>

            <div class="content-area">

                <header class="header sticky-top">
                    <nav class="navbar px-sm-4 navbar-light bg-white">
                        <a class="navbar-brand py-2 d-md-none  m-0 material-icons toggle-sidebar" href="#">menu</a>
                        <ul class="navbar-nav flex-row ml-auto">
                            <li class="nav-item" data-toggle="tooltip" data-placement="bottom" title="Switch Application">
                                <a data-toggle="modal" href="#" data-target="#switchApp" class="nav-link"><span class="material-icons align-middle">apps</span></a>
                            </li>
                            <li class="nav-item ml-sm-3 user-logedin dropdown">
                                <a href="https://wiki.smu.edu.sg/18191is428g1/UserImport/UserExport" target="_blank" class="nav-link weight-400"><img src="image/250px-UIUXLogo.png" class="mr-2 rounded" width="28"> User Export / User Import</a>
                            </li>
                        </ul>
                    </nav>
                </header>

                <div class="content-wrapper">
                    <div class="row page-tilte align-items-center">
                        <div class="col-md-12">
                            <a href="#" class="mt-3 d-md-none float-right toggle-controls"><span class="material-icons">keyboard_arrow_down</span></a>
                            <h1 class="weight-300 h3 title"> Sankey Chart </h1>
                        </div> 
                        <div class="col controls-wrapper mt-3 mt-md-0 d-none d-md-block ">
                            <div class="controls d-flex justify-content-center justify-content-md-end">
                                <button class="btn btn-primary" onclick="editChart()"> Edit Chart </button>
                            </div>
                        </div>
                    </div> 

                    <div class="content">
                        <div class="row">
                            <div class="col-sm-9">
                                <div id="plotlyDiv"></div>
                            </div>
                            <!-- 
                            <div class="col-sm-3">
                                <input type="checkbox" id="togglelegend"> Legend<br/>
                                <div id="legend" style="visibility: hidden;"></div>
                            </div>
                            -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="modal fade" id="longModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form>
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel"> Chart Generator </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span class="material-icons ">close</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="col-sm-12 row">
                                <label class="label-group"> Year to show: </label>
                                <select class="form-control" id="selection">
                                    <option value="2013"> 2013 </option>
                                    <option value="2014"> 2014 </option>
                                    <option value="2015"> 2015 </option>
                                    <option value="2016"> 2016 </option>
                                    <option value="2017"> 2017 </option>
                                </select>
                            </div>

                            <label class="label-group"> Partners: </label> <br/>
                            <div class="row">
                                <div class="col-sm-6">
                                    <input type="checkbox" name="partner" value="ASEAN [00]">  ASEAN </br>
                                    <input type="checkbox" name="partner" value="Extra-ASEAN [88]">  Extra-ASEAN </br>
                                    <input type="checkbox" name="partner" value="Afghanistan [AF]"> Afghanistan </br>
                                    <input type="checkbox" name="partner" value="Albania [AL]"> Albania </br>
                                    <input type="checkbox" name="partner" value="American Samoa [AS]"> American Samoa </br>
                                    <input type="checkbox" name="partner" value="Angola [AO]"> Angola </br>
                                    <input type="checkbox" name="partner" value="Antarctica [AQ]"> Antarctica </br>
                                    <input type="checkbox" name="partner" value="Argentina [AR]"> Argentina </br>
                                    <input type="checkbox" name="partner" value="Aruba [AW]"> Aruba </br>
                                    <input type="checkbox" name="partner" value="Austria [AT]"> Austria </br>
                                    <input type="checkbox" name="partner" value="Bahamas [BS]"> Bahamas </br>
                                    <input type="checkbox" name="partner" value="Bangladesh [BD]"> Bangladesh </br>
                                    <input type="checkbox" name="partner" value="Belarus [BY]"> Belarus </br>
                                    <input type="checkbox" name="partner" value="Belize [BZ]"> Belize </br>
                                    <input type="checkbox" name="partner" value="Bermuda [BM]"> Bermuda </br>
                                    <input type="checkbox" name="partner" value="Bolivia [BO]"> Bolivia </br>
                                    <input type="checkbox" name="partner" value="Bosnia and Herzegovina [BA]"> Bosnia and Herzegovina </br>
                                    <input type="checkbox" name="partner" value="Bouvet Island [BV]"> Bouvet Island </br>
                                    <input type="checkbox" name="partner" value="British Indian Ocean Territory [IO]"> British Indian Ocean Territory </br>
                                    <input type="checkbox" name="partner" value="Bulgaria [BG]"> Bulgaria </br>
                                    <input type="checkbox" name="partner" value="Burundi [BI]"> Burundi </br>
                                    <input type="checkbox" name="partner" value="Cameroon [CM]"> Cameroon </br>
                                    <input type="checkbox" name="partner" value="Cape-Verde [CV]"> Cape-Verde </br>
                                    <input type="checkbox" name="partner" value="Central African Republic [CF]"> Central African Republic </br>
                                    <input type="checkbox" name="partner" value="Chad [TD]"> Chad </br>
                                    <input type="checkbox" name="partner" value="China (People's Republic of) [CN]"> China (People's Republic of) </br>
                                    <input type="checkbox" name="partner" value="Christmas Islands [CX]"> Christmas Islands </br>
                                    <input type="checkbox" name="partner" value="Code used for adjustments [QZ]"> Code used for adjustments </br>
                                    <input type="checkbox" name="partner" value="Comoros [KM]"> Comoros </br>
                                    <input type="checkbox" name="partner" value="Congo [CG]"> Congo </br>
                                    <input type="checkbox" name="partner" value="Costa Rica [CR]"> Costa Rica </br>
                                    <input type="checkbox" name="partner" value="Croatia [HR]"> Croatia </br>
                                    <input type="checkbox" name="partner" value="Curacao [CW]"> Curacao </br>
                                    <input type="checkbox" name="partner" value="Czech Republic [CZ]"> Czech Republic </br>
                                    <input type="checkbox" name="partner" value="Denmark [DK]"> Denmark </br>
                                    <input type="checkbox" name="partner" value="Dominica [DM]"> Dominica </br>
                                    <input type="checkbox" name="partner" value="Ecuador [EC]"> Ecuador </br>
                                    <input type="checkbox" name="partner" value="El Salvador [SV]"> El Salvador </br>
                                    <input type="checkbox" name="partner" value="Eritrea [ER]"> Eritrea </br>
                                    <input type="checkbox" name="partner" value="Ethiopia [ET]"> Ethiopia </br>
                                    <input type="checkbox" name="partner" value="Faroe Islands [FO]"> Faroe Islands </br>
                                    <input type="checkbox" name="partner" value="Finland [FI]"> Finland </br>
                                    <input type="checkbox" name="partner" value="France [FR]"> France </br>
                                    <input type="checkbox" name="partner" value="French Polynesia [PF]"> French Polynesia </br>
                                    <input type="checkbox" name="partner" value="Gabon [GA]"> Gabon </br>
                                    <input type="checkbox" name="partner" value="Georgia [GE]"> Georgia </br>
                                    <input type="checkbox" name="partner" value="Ghana [GH]"> Ghana </br>
                                    <input type="checkbox" name="partner" value="Greece [GR]"> Greece </br>
                                    <input type="checkbox" name="partner" value="Grenada [GD]"> Grenada </br>
                                    <input type="checkbox" name="partner" value="Guadeloupe [GP]"> Guadeloupe </br>
                                    <input type="checkbox" name="partner" value="Guatemala [GT]"> Guatemala </br>
                                    <input type="checkbox" name="partner" value="Guinea [GN]"> Guinea </br>
                                    <input type="checkbox" name="partner" value="Guyana [GY]"> Guyana </br>
                                    <input type="checkbox" name="partner" value="Heard Island and McDonald Islands [HM]"> Heard Island and McDonald Islands </br>
                                    <input type="checkbox" name="partner" value="Honduras [HN]"> Honduras </br>
                                    <input type="checkbox" name="partner" value="Hungary [HU]"> Hungary </br>
                                    <input type="checkbox" name="partner" value="India [IN]"> India </br>
                                    <input type="checkbox" name="partner" value="Iran, Islamic Republic of [IR]"> Iran, Islamic Republic of </br>
                                    <input type="checkbox" name="partner" value="Ireland [IE]"> Ireland </br>
                                    <input type="checkbox" name="partner" value="Israel [IL]"> Israel </br>
                                    <input type="checkbox" name="partner" value="Jamaica [JM]"> Jamaica </br>
                                    <input type="checkbox" name="partner" value="Jersey [JE]"> Jersey </br>
                                    <input type="checkbox" name="partner" value="Kazakhstan [KZ]"> Kazakhstan </br>
                                    <input type="checkbox" name="partner" value="Kiribati [KI]"> Kiribati </br>
                                    <input type="checkbox" name="partner" value="Korea, Democratic People's Republic of [KP]"> Korea, Democratic People's Republic of </br>
                                    <input type="checkbox" name="partner" value="KOSOVO [XK]"> KOSOVO </br>
                                    <input type="checkbox" name="partner" value="Kyrgyzstan [KG]"> Kyrgyzstan </br>
                                    <input type="checkbox" name="partner" value="Latvia [LV]"> Latvia </br>
                                    <input type="checkbox" name="partner" value="Lesotho [LS]"> Lesotho </br>
                                    <input type="checkbox" name="partner" value="Libyan Arab Jamahiriya [LY]"> Libyan Arab Jamahiriya </br>
                                    <input type="checkbox" name="partner" value="Lithuania [LT]"> Lithuania </br>
                                    <input type="checkbox" name="partner" value="Macao [MO]"> Macao </br>
                                    <input type="checkbox" name="partner" value="Malawi [MW]"> Malawi </br>
                                    <input type="checkbox" name="partner" value="Maldives [MV]"> Maldives </br>
                                    <input type="checkbox" name="partner" value="Malta [MT]"> Malta </br>
                                    <input type="checkbox" name="partner" value="Marshall Islands [MH]"> Marshall Islands </br>
                                    <input type="checkbox" name="partner" value="Mauritania [MR]"> Mauritania </br>
                                    <input type="checkbox" name="partner" value="Mayotte [YT]"> Mayotte </br>
                                    <input type="checkbox" name="partner" value="Mexico [MX]"> Mexico </br>
                                    <input type="checkbox" name="partner" value="Moldova, Republic of [MD]"> Moldova, Republic of </br>
                                    <input type="checkbox" name="partner" value="Mongolia [MN]"> Mongolia </br>
                                    <input type="checkbox" name="partner" value="Montserrat [MS]"> Montserrat </br>
                                    <input type="checkbox" name="partner" value="Mozambique [MZ]"> Mozambique </br>
                                    <input type="checkbox" name="partner" value="Namibia [NA]"> Namibia </br>
                                    <input type="checkbox" name="partner" value="Nepal [NP]"> Nepal </br>
                                    <input type="checkbox" name="partner" value="Netherlands Antilles [AN]"> Netherlands Antilles </br>
                                    <input type="checkbox" name="partner" value="New Zealand [NZ]"> New Zealand </br>
                                    <input type="checkbox" name="partner" value="Niger [NE]"> Niger </br>
                                    <input type="checkbox" name="partner" value="Niue [NU]"> Niue </br>
                                    <input type="checkbox" name="partner" value="Northern Mariana Islands [MP]"> Northern Mariana Islands </br>
                                    <input type="checkbox" name="partner" value="Occupied Palestinian Territory [PS]"> Occupied Palestinian Territory </br>
                                    <input type="checkbox" name="partner" value="Pakistan [PK]"> Pakistan </br>
                                    <input type="checkbox" name="partner" value="Panama [PA]"> Panama </br>
                                    <input type="checkbox" name="partner" value="Paraguay [PY]"> Paraguay </br>
                                    <input type="checkbox" name="partner" value="Philippines [PH]"> Philippines </br>
                                    <input type="checkbox" name="partner" value="Poland [PL]"> Poland </br>
                                    <input type="checkbox" name="partner" value="Puerto Rico [PR]"> Puerto Rico </br>
                                    <input type="checkbox" name="partner" value="Reunion [RE]"> Reunion </br>
                                    <input type="checkbox" name="partner" value="Russian Federation [RU]"> Russian Federation </br>
                                    <input type="checkbox" name="partner" value="Saint Barthelemy [BL]"> Saint Barthelemy </br>
                                    <input type="checkbox" name="partner" value="Saint Lucia [LC]"> Saint Lucia </br>
                                    <input type="checkbox" name="partner" value="Samoa [WS]"> Samoa </br>
                                    <input type="checkbox" name="partner" value="Sao Tomé and Principe [ST]"> Sao Tomé and Principe </br>
                                    <input type="checkbox" name="partner" value="Saudi Arabia [SA]"> Saudi Arabia </br>
                                    <input type="checkbox" name="partner" value="SERBIA [RS]"> SERBIA </br>
                                    <input type="checkbox" name="partner" value="Sierra Leone [SL]"> Sierra Leone </br>
                                    <input type="checkbox" name="partner" value="Sint Maarten [SX]"> Sint Maarten </br>
                                    <input type="checkbox" name="partner" value="Slovenia [SI]"> Slovenia </br>
                                    <input type="checkbox" name="partner" value="Somalia [SO]"> Somalia </br>
                                    <input type="checkbox" name="partner" value="South Georgia &amp; South Sandwich Islands [GS]"> South Georgia &amp; South Sandwich Islands </br>
                                    <input type="checkbox" name="partner" value="Spain [ES]"> Spain </br>
                                    <input type="checkbox" name="partner" value="St Kitts and Nevis [KN]"> St Kitts and Nevis </br>
                                    <input type="checkbox" name="partner" value="Stores and provisions [QQ]"> Stores and provisions </br>
                                    <input type="checkbox" name="partner" value="Suriname [SR]"> Suriname </br>
                                    <input type="checkbox" name="partner" value="Swaziland [SZ]"> Swaziland </br>
                                    <input type="checkbox" name="partner" value="Switzerland [CH]"> Switzerland </br>
                                    <input type="checkbox" name="partner" value="Taiwan [TW]"> Taiwan </br>
                                    <input type="checkbox" name="partner" value="Tanzania, United Republic of [TZ]"> Tanzania, United Republic of </br>
                                    <input type="checkbox" name="partner" value="Timor-Leste [TL]"> Timor-Leste </br>
                                    <input type="checkbox" name="partner" value="Tokelau Islands [TK]"> Tokelau Islands </br>
                                    <input type="checkbox" name="partner" value="Trinidad and Tobago [TT]"> Trinidad and Tobago </br>
                                    <input type="checkbox" name="partner" value="Turkey [TR]"> Turkey </br>
                                    <input type="checkbox" name="partner" value="Turks and Caicos Islands [TC]"> Turks and Caicos Islands </br>
                                    <input type="checkbox" name="partner" value="Uganda [UG]"> Uganda </br>
                                    <input type="checkbox" name="partner" value="United Arab Emirates [AE]"> United Arab Emirates </br>
                                    <input type="checkbox" name="partner" value="United States  Minor Outlying islands [UM]"> United States  Minor Outlying islands </br>
                                    <input type="checkbox" name="partner" value="Uruguay [UY]"> Uruguay </br>
                                    <input type="checkbox" name="partner" value="Vanuatu [VU]"> Vanuatu </br>
                                    <input type="checkbox" name="partner" value="Viet Nam [VN]"> Viet Nam </br>
                                    <input type="checkbox" name="partner" value="Virgin Islands, British [VG]"> Virgin Islands, British </br>
                                    <input type="checkbox" name="partner" value="Western Sahara [EH]"> Western Sahara </br>
                                    <input type="checkbox" name="partner" value="Zambia [ZM]"> Zambia </br>
                                </div>
                                <div class="col-sm-6">
                                    <input type="checkbox" name="partner" value="European Union [EU]">  European Union </br>
                                    <input type="checkbox" name="partner" value="WORLD [99]">  WORLD </br>
                                    <input type="checkbox" name="partner" value="Åland Islands [AX]"> Åland Islands </br>
                                    <input type="checkbox" name="partner" value="Algeria [DZ]"> Algeria </br>
                                    <input type="checkbox" name="partner" value="Andorra [AD]"> Andorra </br>
                                    <input type="checkbox" name="partner" value="Anguilla [AI]"> Anguilla </br>
                                    <input type="checkbox" name="partner" value="Antigua and Barbuda [AG]"> Antigua and Barbuda </br>
                                    <input type="checkbox" name="partner" value="Armenia [AM]"> Armenia </br>
                                    <input type="checkbox" name="partner" value="Australia [AU]"> Australia </br>
                                    <input type="checkbox" name="partner" value="Azerbaijan [AZ]"> Azerbaijan </br>
                                    <input type="checkbox" name="partner" value="Bahrain [BH]"> Bahrain </br>
                                    <input type="checkbox" name="partner" value="Barbados [BB]"> Barbados </br>
                                    <input type="checkbox" name="partner" value="Belgium [BE]"> Belgium </br>
                                    <input type="checkbox" name="partner" value="Benin [BJ]"> Benin </br>
                                    <input type="checkbox" name="partner" value="Bhutan [BT]"> Bhutan </br>
                                    <input type="checkbox" name="partner" value="Bonaire, Sint Eustatius and Saba [BQ]"> Bonaire, Sint Eustatius and Saba </br>
                                    <input type="checkbox" name="partner" value="Botswana [BW]"> Botswana </br>
                                    <input type="checkbox" name="partner" value="Brazil [BR]"> Brazil </br>
                                    <input type="checkbox" name="partner" value="Brunei Darussalam [BN]"> Brunei Darussalam </br>
                                    <input type="checkbox" name="partner" value="Burkina Faso [BF]"> Burkina Faso </br>
                                    <input type="checkbox" name="partner" value="Cambodia [KH]"> Cambodia </br>
                                    <input type="checkbox" name="partner" value="Canada [CA]"> Canada </br>
                                    <input type="checkbox" name="partner" value="Cayman Islands [KY]"> Cayman Islands </br>
                                    <input type="checkbox" name="partner" value="Ceuta [XC]"> Ceuta </br>
                                    <input type="checkbox" name="partner" value="Chile [CL]"> Chile </br>
                                    <input type="checkbox" name="partner" value="Cocos Islands (or Keeling Islands) [CC]"> Cocos Islands (or Keeling Islands) </br>
                                    <input type="checkbox" name="partner" value="Colombia [CO]"> Colombia </br>
                                    <input type="checkbox" name="partner" value="Congo (Dem. Rep. of) [CD]"> Congo (Dem. Rep. of) </br>
                                    <input type="checkbox" name="partner" value="Cook Islands [CK]"> Cook Islands </br>
                                    <input type="checkbox" name="partner" value="Côte d'Ivoire [CI]"> Côte d'Ivoire </br>
                                    <input type="checkbox" name="partner" value="Cuba [CU]"> Cuba </br>
                                    <input type="checkbox" name="partner" value="Cyprus [CY]"> Cyprus </br>
                                    <input type="checkbox" name="partner" value="Djibouti [DJ]"> Djibouti </br>
                                    <input type="checkbox" name="partner" value="Dominican Republic [DO]"> Dominican Republic </br>
                                    <input type="checkbox" name="partner" value="Egypt [EG]"> Egypt </br>
                                    <input type="checkbox" name="partner" value="Equatorial Guinea [GQ]"> Equatorial Guinea </br>
                                    <input type="checkbox" name="partner" value="Estonia [EE]"> Estonia </br>
                                    <input type="checkbox" name="partner" value="Falkland Islands [FK]"> Falkland Islands </br>
                                    <input type="checkbox" name="partner" value="Fiji [FJ]"> Fiji </br>
                                    <input type="checkbox" name="partner" value="Former Yugoslav Republic of Macedonia [MK]"> Former Yugoslav Republic of Macedonia </br>
                                    <input type="checkbox" name="partner" value="French Guyana [GF]"> French Guyana </br>
                                    <input type="checkbox" name="partner" value="French Southern Territories [TF]"> French Southern Territories </br>
                                    <input type="checkbox" name="partner" value="Gambia [GM]"> Gambia </br>
                                    <input type="checkbox" name="partner" value="Germany [DE]"> Germany </br>
                                    <input type="checkbox" name="partner" value="Gibraltar [GI]"> Gibraltar </br>
                                    <input type="checkbox" name="partner" value="Greenland [GL]"> Greenland </br>
                                    <input type="checkbox" name="partner" value="Guam [GU]"> Guam </br>
                                    <input type="checkbox" name="partner" value="GUERNSEY  [GG]"> GUERNSEY  </br>
                                    <input type="checkbox" name="partner" value="Guinea-Bissau [GW]"> Guinea-Bissau </br>
                                    <input type="checkbox" name="partner" value="Haiti [HT]"> Haiti </br>
                                    <input type="checkbox" name="partner" value="Holy See [VA]"> Holy See </br>
                                    <input type="checkbox" name="partner" value="Hong Kong [HK]"> Hong Kong </br>
                                    <input type="checkbox" name="partner" value="Iceland [IS]"> Iceland </br>
                                    <input type="checkbox" name="partner" value="Indonesia [ID]"> Indonesia </br>
                                    <input type="checkbox" name="partner" value="Iraq [IQ]"> Iraq </br>
                                    <input type="checkbox" name="partner" value="Isle of Man [IM]"> Isle of Man </br>
                                    <input type="checkbox" name="partner" value="Italy [IT]"> Italy </br>
                                    <input type="checkbox" name="partner" value="Japan [JP]"> Japan </br>
                                    <input type="checkbox" name="partner" value="Jordan [JO]"> Jordan </br>
                                    <input type="checkbox" name="partner" value="Kenya [KE]"> Kenya </br>
                                    <input type="checkbox" name="partner" value="Korea, Republic of [KR]"> Korea, Republic of </br>
                                    <input type="checkbox" name="partner" value="Kuwait [KW]"> Kuwait </br>
                                    <input type="checkbox" name="partner" value="Lao PDR [LA]"> Lao PDR </br>
                                    <input type="checkbox" name="partner" value="Lebanon [LB]"> Lebanon </br>
                                    <input type="checkbox" name="partner" value="Liberia [LR]"> Liberia </br>
                                    <input type="checkbox" name="partner" value="Liechtenstein [LI]"> Liechtenstein </br>
                                    <input type="checkbox" name="partner" value="Luxembourg [LU]"> Luxembourg </br>
                                    <input type="checkbox" name="partner" value="Madagascar [MG]"> Madagascar </br>
                                    <input type="checkbox" name="partner" value="Malaysia [MY]"> Malaysia </br>
                                    <input type="checkbox" name="partner" value="Mali [ML]"> Mali </br>
                                    <input type="checkbox" name="partner" value="Martinique [MQ]"> Martinique </br>
                                    <input type="checkbox" name="partner" value="Mauritius [MU]"> Mauritius </br>
                                    <input type="checkbox" name="partner" value="Melilla [XL]"> Melilla </br>
                                    <input type="checkbox" name="partner" value="Micronesia, Federated States of [FM]"> Micronesia, Federated States of </br>
                                    <input type="checkbox" name="partner" value="Monaco [MC]"> Monaco </br>
                                    <input type="checkbox" name="partner" value="MONTENEGRO [ME]"> MONTENEGRO </br>
                                    <input type="checkbox" name="partner" value="Morocco [MA]"> Morocco </br>
                                    <input type="checkbox" name="partner" value="Myanmar [MM]"> Myanmar </br>
                                    <input type="checkbox" name="partner" value="Nauru [NR]"> Nauru </br>
                                    <input type="checkbox" name="partner" value="Netherlands [NL]"> Netherlands </br>
                                    <input type="checkbox" name="partner" value="New Caledonia [NC]"> New Caledonia </br>
                                    <input type="checkbox" name="partner" value="Nicaragua [NI]"> Nicaragua </br>
                                    <input type="checkbox" name="partner" value="Nigeria [NG]"> Nigeria </br>
                                    <input type="checkbox" name="partner" value="Norfolk Island [NF]"> Norfolk Island </br>
                                    <input type="checkbox" name="partner" value="Norway [NO]"> Norway </br>
                                    <input type="checkbox" name="partner" value="Oman [OM]"> Oman </br>
                                    <input type="checkbox" name="partner" value="Palau [PW]"> Palau </br>
                                    <input type="checkbox" name="partner" value="Papua New Guinea [PG]"> Papua New Guinea </br>
                                    <input type="checkbox" name="partner" value="Peru [PE]"> Peru </br>
                                    <input type="checkbox" name="partner" value="Pitcairn [PN]"> Pitcairn </br>
                                    <input type="checkbox" name="partner" value="Portugal [PT]"> Portugal </br>
                                    <input type="checkbox" name="partner" value="Qatar [QA]"> Qatar </br>
                                    <input type="checkbox" name="partner" value="Romania [RO]"> Romania </br>
                                    <input type="checkbox" name="partner" value="Rwanda [RW]"> Rwanda </br>
                                    <input type="checkbox" name="partner" value="Saint Helena [SH]"> Saint Helena </br>
                                    <input type="checkbox" name="partner" value="Saint Pierre and Miquelon [PM]"> Saint Pierre and Miquelon </br>
                                    <input type="checkbox" name="partner" value="San Marino [SM]"> San Marino </br>
                                    <input type="checkbox" name="partner" value="Senegal [SN]"> Senegal </br>
                                    <input type="checkbox" name="partner" value="Seychelles [SC]"> Seychelles </br>
                                    <input type="checkbox" name="partner" value="Singapore [SG]"> Singapore </br>
                                    <input type="checkbox" name="partner" value="Slovakia [SK]"> Slovakia </br>
                                    <input type="checkbox" name="partner" value="Solomon Islands [SB]"> Solomon Islands </br>
                                    <input type="checkbox" name="partner" value="South Africa [ZA]"> South Africa </br>
                                    <input type="checkbox" name="partner" value="South Sudan [SS]"> South Sudan </br>
                                    <input type="checkbox" name="partner" value="Sri Lanka [LK]"> Sri Lanka </br>
                                    <input type="checkbox" name="partner" value="St Vincent and the Grenadines [VC]"> St Vincent and the Grenadines </br>
                                    <input type="checkbox" name="partner" value="Sudan [SD]"> Sudan </br>
                                    <input type="checkbox" name="partner" value="SVALBARD [SJ]"> SVALBARD </br>
                                    <input type="checkbox" name="partner" value="Sweden [SE]"> Sweden </br>
                                    <input type="checkbox" name="partner" value="Syrian Arab Republic [SY]"> Syrian Arab Republic </br>
                                    <input type="checkbox" name="partner" value="Tajikistan [TJ]"> Tajikistan </br>
                                    <input type="checkbox" name="partner" value="Thailand [TH]"> Thailand </br>
                                    <input type="checkbox" name="partner" value="Togo [TG]"> Togo </br>
                                    <input type="checkbox" name="partner" value="Tonga [TO]"> Tonga </br>
                                    <input type="checkbox" name="partner" value="Tunisia [TN]"> Tunisia </br>
                                    <input type="checkbox" name="partner" value="Turkmenistan [TM]"> Turkmenistan </br>
                                    <input type="checkbox" name="partner" value="Tuvalu [TV]"> Tuvalu </br>
                                    <input type="checkbox" name="partner" value="Ukraine [UA]"> Ukraine </br>
                                    <input type="checkbox" name="partner" value="United Kingdom [GB]"> United Kingdom </br>
                                    <input type="checkbox" name="partner" value="United states [US]"> United states </br>
                                    <input type="checkbox" name="partner" value="Uzbekistan [UZ]"> Uzbekistan </br>
                                    <input type="checkbox" name="partner" value="Venezuela [VE]"> Venezuela </br>
                                    <input type="checkbox" name="partner" value="Virgin Islands (US) [VI]"> Virgin Islands (US) </br>
                                    <input type="checkbox" name="partner" value="Wallis and Futuna [WF]"> Wallis and Futuna </br>
                                    <input type="checkbox" name="partner" value="Yemen [YE]"> Yemen </br>
                                    <input type="checkbox" name="partner" value="Zimbabwe [ZW]"> Zimbabwe </br>
                                </div> 
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" onclick="loadChart()">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" id="switchApp" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header px-4">
                        <h5 class="modal-title" id="exampleModalLabel">Select Application</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span class="material-icons ">close</span>
                        </button>
                    </div>
                    <div class="modal-body p-4">

                        <div class="row align-items-stretch app-switcher">
                            <div class="col-lg-3 col-6 mb-4">
                                <a href="index.html" class="text-dark">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <span class="material-icons md-48 " style="color:#21C3E0;">bubble_chart</span>
                                            <p class="weight-400 m-0">Dashboard</p>
                                            <small class="weight-300 text-muted">This is some text within a card body.</small>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-3 col-6 mb-4">
                                <a href="ecommerce-dashboard.html" class="text-dark">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <span class="material-icons md-48 text-primary">security</span>
                                            <p class="weight-400 m-0">Ecommerce</p>
                                            <small class="weight-300 text-muted">This is some text within a card body.</small>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-3 col-6 mb-4">
                                <a href="mailbox.html" class="text-dark">
                                    <div class="card h-100 active-app">
                                        <div class="card-body text-center">
                                            <span class="material-icons md-48 text-danger">blur_on</span>
                                            <p class="weight-400 m-0">Mail Box</p>
                                            <small class="weight-300 text-muted">This is some text within a card body.</small>
                                            <span class="material-icons app-selected md-16">check</span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-3 col-6 mb-4">
                                <a href="blogger-feed-list.html" class="text-dark">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <span class="material-icons md-48 text-warning">camera</span>
                                            <p class="weight-400 m-0">Blogger</p>
                                            <small class="weight-300 text-muted">This is some text within a card body.</small>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="assets/js/lib/moment.min.js"></script>
        <script src="assets/js/lib/jquery.min.js"></script>
        <script src="assets/js/lib/popper.min.js"></script>
        <script src="assets/js/bootstrap/bootstrap.min.js"></script>
        <script src="assets/js/chosen-js/chosen.jquery.js"></script>
        <script src="assets/js/custom.js">
        </script>
        <script>
            $(document).ready(function () {
                $("#longModal").modal({
                    backdrop: 'static',
                    keyboard: false
                });
            })

            function editChart() {
                $('#longModal').modal('show');
            }

            var source = []
            var target = []
            var value = []
            var label = []

            function loadChart() {
                yearSelected = document.getElementById("selection").value
                partnerList = []

                for (i = 0; i < document.getElementsByName("partner").length; i++) {
                    if (document.getElementsByName("partner")[i].checked == true) {
                        partnerList.push(document.getElementsByName("partner")[i].value)
                    }
                }
                retrieveImportData = []
                retrieveExportData = []
                retrieveData = []

                $.ajax({
                    url: "data/processedASEANImportData" + yearSelected + ".csv",
                    success: function (data) {
                        dataArr = data.split("|")
                        for (i = 0; i < dataArr.length - 1; i++) { //dataArr.length
                            for (p = 0; p < partnerList.length; p++) {
                                if (dataArr[i].split("#")[2].trim() === partnerList[p]) {
                                    retrieveImportData.push(dataArr[i].split("#"))
                                }
                            }
                        }
                    },
                });

                $.ajax({
                    url: "data/processedASEANExportData" + yearSelected + ".csv",
                    success: function (data) {
                        dataArr = data.split("|")
                        for (i = 0; i < dataArr.length - 1; i++) { //dataArr.length
                            for (p = 0; p < partnerList.length; p++) {
                                if (dataArr[i].split("#")[2].trim() === partnerList[p]) {
                                    retrieveExportData.push(dataArr[i].split("#"))
                                }
                            }
                        }
                    },
                });

                setTimeout(function () {
                    loadImportProcess(retrieveImportData, yearSelected)
                    loadExportProcess(retrieveExportData, yearSelected)
                    $("#longModal").modal("hide");
                }, 1000)
            }

            function loadImportProcess(importData, yearSelected) {
                source = []
                target = []
                value = []
                label = []
                country = []
                category = []
                dict = {}

                for (i = 0; i < importData.length; i++) {
                    // for country
                    if (label.includes(importData[i][2].trim()) == false) {
                        label.push(importData[i][2].trim())
                        country.push(importData[i][2].trim())
                    }
                    // For category
                    if (label.includes(importData[i][3].trim()) == false) {
                        category.push(importData[i][3].trim())
                        total = dict[importData[i][3].trim()]
                        if (total === undefined) {
                            dict[importData[i][3].trim()] = parseFloat(importData[i][4])
                        } else {
                            dict[importData[i][3].trim()] = (total + parseFloat(importData[i][4]))
                        }
                    }
                }
                // Create items array
                var items = Object.keys(dict).map(function (key) {
                    return [key, dict[key]];
                });

                // Sort the array based on the second element
                items.sort(function (first, second) {
                    return second[1] - first[1];
                });

                counter = 0
                var x = Object.keys(dict);
                for (k = 0; k < items.length; k++) {
                    for (i = 0; i < x.length; i++) {
                        if (counter < 5) {
                            if (items[k][1] === dict[x[i]]) {
                                label.push(x[i])
                                counter += 1
                                break
                            }
                        }
                    }
                }

                for (i = 0; i < importData.length; i++) {
                    if (label.includes(importData[i][2].trim()) && label.includes(importData[i][3].trim())) {
                        source.push(label.indexOf(importData[i][2].trim()))
                        target.push(label.indexOf(importData[i][3]))
                        value.push(importData[i][4])
                    }
                }

                label.push("Others")
                for (c = 0; c < country.length; c++) {
                    total = 0
                    for (i = 0; i < importData.length; i++) {
                        if (importData[i][2].trim() === country[c] && label.indexOf(importData[i][3].trim()) === -1) {
                            total += parseFloat(importData[i][4])
                        }
                    }
                    source.push(label.indexOf(country[c]))
                    target.push(label.indexOf("Others"))
                    value.push(String(total))
                }

                label.push("Total Import")
                for (i = 0; i < label.length; i++) {
                    if (country.includes(label[i]) !== true && i != label.length - 1) {
                        source.push(label.indexOf(label[i]))
                        target.push(label.indexOf("Total Import"))
                        subtotal = 0
                        for (t = 0; t < target.length; t++) {
                            if (target[t] === label.indexOf(label[i])) {
                                subtotal += parseFloat(value[t])
                            }
                        }
                        value.push(String(subtotal))
                    }
                }
            }

            function loadExportProcess(exportData, yearSelected) {
                sourceExport = []
                targetExport = []
                valueExport = []
                labelExport = []
                country = []
                category = []
                dict = {}

                for (i = 0; i < exportData.length; i++) {
                    // for country
                    if (labelExport.includes(exportData[i][2].trim()) == false) {
                        labelExport.push(exportData[i][2].trim())
                        country.push(exportData[i][2].trim())
                    }
                    // For category
                    if (label.includes(exportData[i][3].trim()) == false) {
                        category.push(exportData[i][3].trim())
                        total = dict[exportData[i][3].trim()]
                        if (total === undefined) {
                            dict[exportData[i][3].trim()] = parseFloat(exportData[i][4])
                        } else {
                            dict[exportData[i][3].trim()] = (total + parseFloat(exportData[i][4]))
                        }
                    }
                }
                // Create items array
                var items = Object.keys(dict).map(function (key) {
                    return [key, dict[key]];
                });

                // Sort the array based on the second element
                items.sort(function (first, second) {
                    return second[1] - first[1];
                });

                counter = 0
                var x = Object.keys(dict);
                for (k = 0; k < items.length; k++) {
                    for (i = 0; i < x.length; i++) {
                        if (counter < 5) {
                            if (items[k][1] === dict[x[i]]) {
                                labelExport.push(x[i])
                                counter += 1
                                break
                            }
                        }
                    }
                }

                for (i = 0; i < exportData.length; i++) {
                    if (labelExport.includes(exportData[i][2].trim()) && labelExport.includes(exportData[i][3].trim())) {
                        sourceExport.push(labelExport.indexOf(exportData[i][2].trim()))
                        targetExport.push(labelExport.indexOf(exportData[i][3].trim()))
                        valueExport.push(exportData[i][4])
                    }
                }

                labelExport.push("Others")
                for (c = 0; c < country.length; c++) {
                    total = 0
                    for (i = 0; i < exportData.length; i++) {
                        if (exportData[i][2].trim() === country[c] && labelExport.indexOf(exportData[i][3].trim()) === -1) {
                            total += parseFloat(exportData[i][4])
                        }
                    }
                    sourceExport.push(labelExport.indexOf(country[c]))
                    targetExport.push(labelExport.indexOf("Others"))
                    valueExport.push(String(total))
                }

                labelExport.push("Total Export")
                subtotal = 0
                for (i = 0; i < labelExport.length; i++) {
                    catTotal = 0
                    if (country.includes(labelExport[i]) !== true && i != labelExport.length - 1) {
                        sourceExport.push(labelExport.indexOf(labelExport[i]))
                        targetExport.push(labelExport.indexOf("Total Export"))
                        for (t = 0; t < targetExport.length; t++) {
                            if (targetExport[t] === labelExport.indexOf(labelExport[i])) {
                                subtotal += parseFloat(valueExport[t])
                                catTotal += parseFloat(valueExport[t])
                            }
                        }
                        valueExport.push(String(catTotal))
                    }
                }

                label.push("Trades")
                tradeTotal = 0
                totalImportIndex = source[source.length - 1] + 1
                for (i = 0; i < target.length; i++) {
                    if (parseInt(target[i]) === totalImportIndex) {
                        tradeTotal += parseFloat(value[i])
                    }
                }

                source.push(totalImportIndex)
                target.push(totalImportIndex + 1)
                value.push(String(tradeTotal))

                source.push(label.indexOf("Trades"))
                target.push(label.indexOf("Trades") + 1)
                value.push(String(subtotal))

                labelExportReverse = labelExport.slice()
                label = label.concat(labelExportReverse.reverse())
                for (i = 0; i < sourceExport.length; i++) {
                    sourceExport[i] = label.lastIndexOf(labelExport[sourceExport[i]])
                    targetExport[i] = label.lastIndexOf(labelExport[targetExport[i]])
                }

                source = source.concat(targetExport.reverse())
                target = target.concat(sourceExport.reverse())
                value = value.concat(valueExport.reverse())

                generateSankey(yearSelected)
            }

            function generateSankey(yearSelected) {
                var printDiagram = {
                    type: "sankey",
                    domain: {
                        x: [0, 2],
                        y: [0, 1]
                    },
                    orientation: "h",
                    valueformat: "$,.0f",
                    valuesuffix: " (Thousand)",
                    node: {
                        pad: 15,
                        thickness: 15,
                        line: {
                            color: "black",
                            width: 0.5
                        },
                        label: label
                    },

                    link: {
                        source: source,
                        target: target,
                        value: value
                    }
                }

                var printSankey = [printDiagram]
                var layout = {
                    title: "ASEAN " + yearSelected + " Trade",
                    width: 1100,
                    height: 550,
                    font: {
                        size: 10
                    }
                }

                Plotly.newPlot('plotlyDiv', printSankey, layout, {displayModeBar: false})
            }
        </script>
    </body>
</html>
