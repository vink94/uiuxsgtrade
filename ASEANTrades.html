<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Base CSS -->
        <link rel="stylesheet" href="assets/css/basestyle/style.css">

        <!-- Material Icons -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <title> IS428: SG Trade Visualization </title>
        <script src="http://d3js.org/d3.v4.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600">
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
    </head>

    <body>
        <!-- Pre Loader-->
        <div class="loader-wrapper">
            <div class="spinner">
                <svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle class="length" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="28"></circle>
                </svg>
                <svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="28"></circle>
                </svg>
                <svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="28"></circle>
                </svg>
                <svg viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="28"></circle>
                </svg>
            </div>
        </div>
        <!-- Pre Loader-->

        <section class="wrapper">
            <!-- SIDEBAR -->
            <aside class="sidebar sidebar-light">
                <nav class="navbar navbar-light bg-white">
                    <a class="navbar-brand m-0 py-2 brand-title" href="#"> Visual Analytics </a>
                    <span></span>
                    <a class="navbar-brand py-2 material-icons toggle-sidebar" href="#">menu</a>
                </nav>

                <nav class="navigation">
                    <ul>
                        <li class=""><a href="index.html" title="Dashboard"><span class="nav-icon material-icons">public</span> Home </a></li>
                        <li class=""><a href="SGMerchandiseImportExport.html"><span class="nav-icon material-icons "> card_travel </span> SG Trades </a></li>
                        <li class="active"><a href="ASEANTrades.html"><span class="nav-icon material-icons ">score</span> ASEAN Trades </a></li>
                        <li class=""><a href="SGTrade.html"><span class="nav-icon material-icons ">score</span> SG Trade </a></li>
                    </ul>
                </nav>

            </aside>

            <div class="content-area">

                <header class="header sticky-top">
                    <nav class="navbar px-sm-4 navbar-light bg-white">
                        <a class="navbar-brand py-2 d-md-none  m-0 material-icons toggle-sidebar" href="#">menu</a>
                        <ul class="navbar-nav flex-row ml-auto">
                            <li class="nav-item" data-toggle="tooltip" data-placement="bottom" title="Switch Application">
                                <a data-toggle="modal" href="#" data-target="#switchApp" class="nav-link"><span class="material-icons align-middle">apps</span></a>
                            </li>
                            <li class="nav-item ml-sm-3 user-logedin dropdown">
                                <a href="https://wiki.smu.edu.sg/18191is428g1/UserImport/UserExport" target="_blank" class="nav-link weight-400"><img src="image/250px-UIUXLogo.png" class="mr-2 rounded" width="28"> User Export / User Import</a>
                            </li>
                        </ul>
                    </nav>
                </header>

                <div class="content-wrapper">

                    <div class="row page-tilte align-items-center">
                        <div class="col-md-12">
                            <a href="#" class="mt-3 d-md-none float-right toggle-controls"><span class="material-icons">keyboard_arrow_down</span></a>
                            <h1 class="weight-300 h3 title"> Sankey Chart </h1>
                        </div> 
                        <div class="col controls-wrapper mt-3 mt-md-0 d-none d-md-block ">
                            <div class="controls d-flex justify-content-center justify-content-md-end">
                                <button class="btn btn-primary" onclick="editChart()"> Edit Chart </button>
                            </div>
                        </div>
                    </div> 

                    <div class="content">
                        <div class="row">
                            <div class="col-sm-9">
                                <div id="plotlyDiv"></div>
                            </div>
                            <!-- 
                            <div class="col-sm-3">
                                <input type="checkbox" id="togglelegend"> Legend<br/>
                                <div id="legend" style="visibility: hidden;"></div>
                            </div>
                            -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="modal fade" id="longModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form>
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel"> Chart Generator </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span class="material-icons ">close</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="col-sm-3 row">
                                <label class="label-group"> Year to show: </label>
                                <select class="form-group" id="selection">
                                    <option value="2013"> 2013 </option>
                                    <option value="2014"> 2014 </option>
                                    <option value="2015"> 2015 </option>
                                    <option value="2016"> 2016 </option>
                                    <option value="2017"> 2017 </option>
                                </select>
                            </div>

                            <div class="col-sm-12">
                                <label class="label-group"> Partners: </label> <br/>
                                <input type="checkbox" name="partner" value="ASEAN"> ASEAN <br/>
                                <input type="checkbox" name="partner" value="European Union"> European Union <br/>
                                <input type="checkbox" name="partner" value="Extra-ASEAN"> Extra-ASEAN <br/>
                                <input type="checkbox" name="partner" value="Afghanistan"> Afghanistan <br/>
                                <input type="checkbox" name="partner" value="Åland Islands"> Åland Islands <br/>
                                <input type="checkbox" name="partner" value="Albania"> Albania <br/>
                                <input type="checkbox" name="partner" value="Algeria"> Algeria <br/>
                                <input type="checkbox" name="partner" value="American Samoa"> American Samoa <br/>
                                <input type="checkbox" name="partner" value="Andorra"> Andorra <br/>
                                <input type="checkbox" name="partner" value="Angola"> Angola <br/>
                                <input type="checkbox" name="partner" value="Anguilla"> Anguilla <br/>
                                <input type="checkbox" name="partner" value="Antarctica"> Antarctica <br/>
                                <input type="checkbox" name="partner" value="Antigua and Barbuda"> Antigua and Barbuda <br/>
                                <input type="checkbox" name="partner" value="Argentina"> Argentina <br/>
                                <input type="checkbox" name="partner" value="Armenia"> Armenia <br/>
                                <input type="checkbox" name="partner" value="Aruba"> Aruba <br/>
                                <input type="checkbox" name="partner" value="Australia"> Australia <br/>
                                <input type="checkbox" name="partner" value="Austria"> Austria <br/>
                                <input type="checkbox" name="partner" value="Azerbaijan"> Azerbaijan <br/>
                                <input type="checkbox" name="partner" value="Bahamas"> Bahamas <br/>
                                <input type="checkbox" name="partner" value="Bahrain"> Bahrain <br/>
                                <input type="checkbox" name="partner" value="Bangladesh"> Bangladesh <br/>
                                <input type="checkbox" name="partner" value="Barbados"> Barbados <br/>
                                <input type="checkbox" name="partner" value="Belarus"> Belarus <br/>
                                <input type="checkbox" name="partner" value="Belgium"> Belgium <br/>
                                <input type="checkbox" name="partner" value="Belize"> Belize <br/>
                                <input type="checkbox" name="partner" value="Benin"> Benin <br/>
                                <input type="checkbox" name="partner" value="Bermuda"> Bermuda <br/>
                                <input type="checkbox" name="partner" value="Bhutan"> Bhutan <br/>
                                <input type="checkbox" name="partner" value="Bolivia"> Bolivia <br/>
                                <input type="checkbox" name="partner" value="Bonaire, Sint Eustatius and Saba"> Bonaire, Sint Eustatius and Saba <br/>
                                <input type="checkbox" name="partner" value="Bosnia and Herzegovina"> Bosnia and Herzegovina <br/>
                                <input type="checkbox" name="partner" value="Botswana"> Botswana <br/>
                                <input type="checkbox" name="partner" value="Bouvet Island"> Bouvet Island <br/>
                                <input type="checkbox" name="partner" value="Brazil"> Brazil <br/>
                                <input type="checkbox" name="partner" value="British Indian Ocean Territory"> British Indian Ocean Territory <br/>
                                <input type="checkbox" name="partner" value="Brunei Darussalam"> Brunei Darussalam <br/>
                                <input type="checkbox" name="partner" value="Bulgaria"> Bulgaria <br/>
                                <input type="checkbox" name="partner" value="Burkina Faso"> Burkina Faso <br/>
                                <input type="checkbox" name="partner" value="Burundi"> Burundi <br/>
                                <input type="checkbox" name="partner" value="Cambodia"> Cambodia <br/>
                                <input type="checkbox" name="partner" value="Cameroon"> Cameroon <br/>
                                <input type="checkbox" name="partner" value="Canada"> Canada <br/>
                                <input type="checkbox" name="partner" value="Cape-Verde"> Cape-Verde <br/>
                                <input type="checkbox" name="partner" value="Cayman Islands"> Cayman Islands <br/>
                                <input type="checkbox" name="partner" value="Central African Republic"> Central African Republic <br/>
                                <input type="checkbox" name="partner" value="Ceuta"> Ceuta <br/>
                                <input type="checkbox" name="partner" value="Chad"> Chad <br/>
                                <input type="checkbox" name="partner" value="Chile"> Chile <br/>
                                <input type="checkbox" name="partner" value="China (People's Republic of)"> China (People's Republic of) <br/>
                                <input type="checkbox" name="partner" value="Christmas Islands"> Christmas Islands <br/>
                                <input type="checkbox" name="partner" value="Cocos Islands (or Keeling Islands)"> Cocos Islands (or Keeling Islands) <br/>
                                <input type="checkbox" name="partner" value="Code used for adjustments"> Code used for adjustments <br/>
                                <input type="checkbox" name="partner" value="Colombia"> Colombia <br/>
                                <input type="checkbox" name="partner" value="Comoros"> Comoros <br/>
                                <input type="checkbox" name="partner" value="Congo (Dem. Rep. of)"> Congo (Dem. Rep. of) <br/>
                                <input type="checkbox" name="partner" value="Congo"> Congo <br/>
                                <input type="checkbox" name="partner" value="Cook Islands"> Cook Islands <br/>
                                <input type="checkbox" name="partner" value="Costa Rica"> Costa Rica <br/>
                                <input type="checkbox" name="partner" value="Côte d'Ivoire"> Côte d'Ivoire <br/>
                                <input type="checkbox" name="partner" value="Countries and territories not specified"> Countries and territories not specified <br/>
                                <input type="checkbox" name="partner" value="Croatia"> Croatia <br/>
                                <input type="checkbox" name="partner" value="Cuba"> Cuba <br/>
                                <input type="checkbox" name="partner" value="Curacao"> Curacao <br/>
                                <input type="checkbox" name="partner" value="Cyprus"> Cyprus <br/>
                                <input type="checkbox" name="partner" value="Czech Republic"> Czech Republic <br/>
                                <input type="checkbox" name="partner" value="Denmark"> Denmark <br/>
                                <input type="checkbox" name="partner" value="Djibouti"> Djibouti <br/>
                                <input type="checkbox" name="partner" value="Dominica"> Dominica <br/>
                                <input type="checkbox" name="partner" value="Dominican Republic"> Dominican Republic <br/>
                                <input type="checkbox" name="partner" value="Ecuador"> Ecuador <br/>
                                <input type="checkbox" name="partner" value="Egypt"> Egypt <br/>
                                <input type="checkbox" name="partner" value="El Salvador"> El Salvador <br/>
                                <input type="checkbox" name="partner" value="Equatorial Guinea"> Equatorial Guinea <br/>
                                <input type="checkbox" name="partner" value="Eritrea"> Eritrea <br/>
                                <input type="checkbox" name="partner" value="Estonia"> Estonia <br/>
                                <input type="checkbox" name="partner" value="Ethiopia"> Ethiopia <br/>
                                <input type="checkbox" name="partner" value="Falkland Islands"> Falkland Islands <br/>
                                <input type="checkbox" name="partner" value="Faroe Islands"> Faroe Islands <br/>
                                <input type="checkbox" name="partner" value="Fiji"> Fiji <br/>
                                <input type="checkbox" name="partner" value="Finland"> Finland <br/>
                                <input type="checkbox" name="partner" value="Former Yugoslav Republic of Macedonia"> Former Yugoslav Republic of Macedonia <br/>
                                <input type="checkbox" name="partner" value="France"> France <br/>
                                <input type="checkbox" name="partner" value="French Guyana"> French Guyana <br/>
                                <input type="checkbox" name="partner" value="French Polynesia"> French Polynesia <br/>
                                <input type="checkbox" name="partner" value="French Southern Territories"> French Southern Territories <br/>
                                <input type="checkbox" name="partner" value="Gabon"> Gabon <br/>
                                <input type="checkbox" name="partner" value="Gambia"> Gambia <br/>
                                <input type="checkbox" name="partner" value="Georgia"> Georgia <br/>
                                <input type="checkbox" name="partner" value="Germany"> Germany <br/>
                                <input type="checkbox" name="partner" value="Ghana"> Ghana <br/>
                                <input type="checkbox" name="partner" value="Gibraltar"> Gibraltar <br/>
                                <input type="checkbox" name="partner" value="Greece"> Greece <br/>
                                <input type="checkbox" name="partner" value="Greenland"> Greenland <br/>
                                <input type="checkbox" name="partner" value="Grenada"> Grenada <br/>
                                <input type="checkbox" name="partner" value="Guadeloupe"> Guadeloupe <br/>
                                <input type="checkbox" name="partner" value="Guam"> Guam <br/>
                                <input type="checkbox" name="partner" value="Guatemala"> Guatemala <br/>
                                <input type="checkbox" name="partner" value="GUERNSEY "> GUERNSEY  <br/>
                                <input type="checkbox" name="partner" value="Guinea"> Guinea <br/>
                                <input type="checkbox" name="partner" value="Guinea-Bissau"> Guinea-Bissau <br/>
                                <input type="checkbox" name="partner" value="Guyana"> Guyana <br/>
                                <input type="checkbox" name="partner" value="Haiti"> Haiti <br/>
                                <input type="checkbox" name="partner" value="Heard Island and McDonald Islands"> Heard Island and McDonald Islands <br/>
                                <input type="checkbox" name="partner" value="Holy See"> Holy See <br/>
                                <input type="checkbox" name="partner" value="Honduras"> Honduras <br/>
                                <input type="checkbox" name="partner" value="Hong Kong"> Hong Kong <br/>
                                <input type="checkbox" name="partner" value="Hungary"> Hungary <br/>
                                <input type="checkbox" name="partner" value="Iceland"> Iceland <br/>
                                <input type="checkbox" name="partner" value="India"> India <br/>
                                <input type="checkbox" name="partner" value="Indonesia"> Indonesia <br/>
                                <input type="checkbox" name="partner" value="Invalid country code"> Invalid country code <br/>
                                <input type="checkbox" name="partner" value="Iran, Islamic Republic of"> Iran, Islamic Republic of <br/>
                                <input type="checkbox" name="partner" value="Iraq"> Iraq <br/>
                                <input type="checkbox" name="partner" value="Ireland"> Ireland <br/>
                                <input type="checkbox" name="partner" value="Isle of Man"> Isle of Man <br/>
                                <input type="checkbox" name="partner" value="Israel"> Israel <br/>
                                <input type="checkbox" name="partner" value="Italy"> Italy <br/>
                                <input type="checkbox" name="partner" value="Jamaica"> Jamaica <br/>
                                <input type="checkbox" name="partner" value="Japan"> Japan <br/>
                                <input type="checkbox" name="partner" value="Jersey"> Jersey <br/>
                                <input type="checkbox" name="partner" value="Jordan"> Jordan <br/>
                                <input type="checkbox" name="partner" value="Kazakhstan"> Kazakhstan <br/>
                                <input type="checkbox" name="partner" value="Kenya"> Kenya <br/>
                                <input type="checkbox" name="partner" value="Kiribati"> Kiribati <br/>
                                <input type="checkbox" name="partner" value="Korea, Democratic People's Republic of"> Korea, Democratic People's Republic of <br/>
                                <input type="checkbox" name="partner" value="Korea, Republic of"> Korea, Republic of <br/>
                                <input type="checkbox" name="partner" value="KOSOVO"> KOSOVO <br/>
                                <input type="checkbox" name="partner" value="Kuwait"> Kuwait <br/>
                                <input type="checkbox" name="partner" value="Kyrgyzstan"> Kyrgyzstan <br/>
                                <input type="checkbox" name="partner" value="Lao PDR"> Lao PDR <br/>
                                <input type="checkbox" name="partner" value="Latvia"> Latvia <br/>
                                <input type="checkbox" name="partner" value="Lebanon"> Lebanon <br/>
                                <input type="checkbox" name="partner" value="Lesotho"> Lesotho <br/>
                                <input type="checkbox" name="partner" value="Liberia"> Liberia <br/>
                                <input type="checkbox" name="partner" value="Libyan Arab Jamahiriya"> Libyan Arab Jamahiriya <br/>
                                <input type="checkbox" name="partner" value="Liechtenstein"> Liechtenstein <br/>
                                <input type="checkbox" name="partner" value="Lithuania"> Lithuania <br/>
                                <input type="checkbox" name="partner" value="Luxembourg"> Luxembourg <br/>
                                <input type="checkbox" name="partner" value="Macao"> Macao <br/>
                                <input type="checkbox" name="partner" value="Madagascar"> Madagascar <br/>
                                <input type="checkbox" name="partner" value="Malawi"> Malawi <br/>
                                <input type="checkbox" name="partner" value="Malaysia"> Malaysia <br/>
                                <input type="checkbox" name="partner" value="Maldives"> Maldives <br/>
                                <input type="checkbox" name="partner" value="Mali"> Mali <br/>
                                <input type="checkbox" name="partner" value="Malta"> Malta <br/>
                                <input type="checkbox" name="partner" value="Marshall Islands"> Marshall Islands <br/>
                                <input type="checkbox" name="partner" value="Martinique"> Martinique <br/>
                                <input type="checkbox" name="partner" value="Mauritania"> Mauritania <br/>
                                <input type="checkbox" name="partner" value="Mauritius"> Mauritius <br/>
                                <input type="checkbox" name="partner" value="Mayotte"> Mayotte <br/>
                                <input type="checkbox" name="partner" value="Melilla"> Melilla <br/>
                                <input type="checkbox" name="partner" value="Mexico"> Mexico <br/>
                                <input type="checkbox" name="partner" value="Micronesia, Federated States of"> Micronesia, Federated States of <br/>
                                <input type="checkbox" name="partner" value="Moldova, Republic of"> Moldova, Republic of <br/>
                                <input type="checkbox" name="partner" value="Monaco"> Monaco <br/>
                                <input type="checkbox" name="partner" value="Mongolia"> Mongolia <br/>
                                <input type="checkbox" name="partner" value="MONTENEGRO"> MONTENEGRO <br/>
                                <input type="checkbox" name="partner" value="Montserrat"> Montserrat <br/>
                                <input type="checkbox" name="partner" value="Morocco"> Morocco <br/>
                                <input type="checkbox" name="partner" value="Mozambique"> Mozambique <br/>
                                <input type="checkbox" name="partner" value="Myanmar"> Myanmar <br/>
                                <input type="checkbox" name="partner" value="Namibia"> Namibia <br/>
                                <input type="checkbox" name="partner" value="Nauru"> Nauru <br/>
                                <input type="checkbox" name="partner" value="Nepal"> Nepal <br/>
                                <input type="checkbox" name="partner" value="Netherlands"> Netherlands <br/>
                                <input type="checkbox" name="partner" value="Netherlands Antilles"> Netherlands Antilles <br/>
                                <input type="checkbox" name="partner" value="New Caledonia"> New Caledonia <br/>
                                <input type="checkbox" name="partner" value="New Zealand"> New Zealand <br/>
                                <input type="checkbox" name="partner" value="Nicaragua"> Nicaragua <br/>
                                <input type="checkbox" name="partner" value="Niger"> Niger <br/>
                                <input type="checkbox" name="partner" value="Nigeria"> Nigeria <br/>
                                <input type="checkbox" name="partner" value="Niue"> Niue <br/>
                                <input type="checkbox" name="partner" value="Norfolk Island"> Norfolk Island <br/>
                                <input type="checkbox" name="partner" value="Northern Mariana Islands"> Northern Mariana Islands <br/>
                                <input type="checkbox" name="partner" value="Norway"> Norway <br/>
                                <input type="checkbox" name="partner" value="Occupied Palestinian Territory"> Occupied Palestinian Territory <br/>
                                <input type="checkbox" name="partner" value="Oman"> Oman <br/>
                                <input type="checkbox" name="partner" value="Pakistan"> Pakistan <br/>
                                <input type="checkbox" name="partner" value="Palau"> Palau <br/>
                                <input type="checkbox" name="partner" value="Panama"> Panama <br/>
                                <input type="checkbox" name="partner" value="Papua New Guinea"> Papua New Guinea <br/>
                                <input type="checkbox" name="partner" value="Paraguay"> Paraguay <br/>
                                <input type="checkbox" name="partner" value="Peru"> Peru <br/>
                                <input type="checkbox" name="partner" value="Philippines"> Philippines <br/>
                                <input type="checkbox" name="partner" value="Pitcairn"> Pitcairn <br/>
                                <input type="checkbox" name="partner" value="Poland"> Poland <br/>
                                <input type="checkbox" name="partner" value="Portugal"> Portugal <br/>
                                <input type="checkbox" name="partner" value="Puerto Rico"> Puerto Rico <br/>
                                <input type="checkbox" name="partner" value="Qatar"> Qatar <br/>
                                <input type="checkbox" name="partner" value="Reunion"> Reunion <br/>
                                <input type="checkbox" name="partner" value="Romania"> Romania <br/>
                                <input type="checkbox" name="partner" value="Russian Federation"> Russian Federation <br/>
                                <input type="checkbox" name="partner" value="Rwanda"> Rwanda <br/>
                                <input type="checkbox" name="partner" value="Saint Barthelemy"> Saint Barthelemy <br/>
                                <input type="checkbox" name="partner" value="Saint Helena"> Saint Helena <br/>
                                <input type="checkbox" name="partner" value="Saint Lucia"> Saint Lucia <br/>
                                <input type="checkbox" name="partner" value="Saint Pierre and Miquelon"> Saint Pierre and Miquelon <br/>
                                <input type="checkbox" name="partner" value="Samoa"> Samoa <br/>
                                <input type="checkbox" name="partner" value="San Marino"> San Marino <br/>
                                <input type="checkbox" name="partner" value="Sao Tomé and Principe"> Sao Tomé and Principe <br/>
                                <input type="checkbox" name="partner" value="Saudi Arabia"> Saudi Arabia <br/>
                                <input type="checkbox" name="partner" value="Senegal"> Senegal <br/>
                                <input type="checkbox" name="partner" value="SERBIA"> SERBIA <br/>
                                <input type="checkbox" name="partner" value="Seychelles"> Seychelles <br/>
                                <input type="checkbox" name="partner" value="Sierra Leone"> Sierra Leone <br/>
                                <input type="checkbox" name="partner" value="Singapore"> Singapore <br/>
                                <input type="checkbox" name="partner" value="Sint Maarten"> Sint Maarten <br/>
                                <input type="checkbox" name="partner" value="Slovakia"> Slovakia <br/>
                                <input type="checkbox" name="partner" value="Slovenia"> Slovenia <br/>
                                <input type="checkbox" name="partner" value="Solomon Islands"> Solomon Islands <br/>
                                <input type="checkbox" name="partner" value="Somalia"> Somalia <br/>
                                <input type="checkbox" name="partner" value="South Africa"> South Africa <br/>
                                <input type="checkbox" name="partner" value="South Georgia & South Sandwich Islands"> South Georgia & South Sandwich Islands <br/>
                                <input type="checkbox" name="partner" value="South Sudan"> South Sudan <br/>
                                <input type="checkbox" name="partner" value="Spain"> Spain <br/>
                                <input type="checkbox" name="partner" value="Sri Lanka"> Sri Lanka <br/>
                                <input type="checkbox" name="partner" value="St Kitts and Nevis"> St Kitts and Nevis <br/>
                                <input type="checkbox" name="partner" value="St Vincent and the Grenadines"> St Vincent and the Grenadines <br/>
                                <input type="checkbox" name="partner" value="Stores and provisions"> Stores and provisions <br/>
                                <input type="checkbox" name="partner" value="Sudan"> Sudan <br/>
                                <input type="checkbox" name="partner" value="Suriname"> Suriname <br/>
                                <input type="checkbox" name="partner" value="SVALBARD"> SVALBARD <br/>
                                <input type="checkbox" name="partner" value="Swaziland"> Swaziland <br/>
                                <input type="checkbox" name="partner" value="Sweden"> Sweden <br/>
                                <input type="checkbox" name="partner" value="Switzerland"> Switzerland <br/>
                                <input type="checkbox" name="partner" value="Syrian Arab Republic"> Syrian Arab Republic <br/>
                                <input type="checkbox" name="partner" value="Taiwan"> Taiwan <br/>
                                <input type="checkbox" name="partner" value="Tajikistan"> Tajikistan <br/>
                                <input type="checkbox" name="partner" value="Tanzania, United Republic of"> Tanzania, United Republic of <br/>
                                <input type="checkbox" name="partner" value="Thailand"> Thailand <br/>
                                <input type="checkbox" name="partner" value="Timor-Leste"> Timor-Leste <br/>
                                <input type="checkbox" name="partner" value="Togo"> Togo <br/>
                                <input type="checkbox" name="partner" value="Tokelau Islands"> Tokelau Islands <br/>
                                <input type="checkbox" name="partner" value="Tonga"> Tonga <br/>
                                <input type="checkbox" name="partner" value="Trinidad and Tobago"> Trinidad and Tobago <br/>
                                <input type="checkbox" name="partner" value="Tunisia"> Tunisia <br/>
                                <input type="checkbox" name="partner" value="Turkey"> Turkey <br/>
                                <input type="checkbox" name="partner" value="Turkmenistan"> Turkmenistan <br/>
                                <input type="checkbox" name="partner" value="Turks and Caicos Islands"> Turks and Caicos Islands <br/>
                                <input type="checkbox" name="partner" value="Tuvalu"> Tuvalu <br/>
                                <input type="checkbox" name="partner" value="Uganda"> Uganda <br/>
                                <input type="checkbox" name="partner" value="Ukraine"> Ukraine <br/>
                                <input type="checkbox" name="partner" value="United Arab Emirates"> United Arab Emirates <br/>
                                <input type="checkbox" name="partner" value="United Kingdom"> United Kingdom <br/>
                                <input type="checkbox" name="partner" value="United States  Minor Outlying islands"> United States  Minor Outlying islands <br/>
                                <input type="checkbox" name="partner" value="United states"> United states <br/>
                                <input type="checkbox" name="partner" value="Uruguay"> Uruguay <br/>
                                <input type="checkbox" name="partner" value="Uzbekistan"> Uzbekistan <br/>
                                <input type="checkbox" name="partner" value="Vanuatu"> Vanuatu <br/>
                                <input type="checkbox" name="partner" value="Venezuela"> Venezuela <br/>
                                <input type="checkbox" name="partner" value="Viet Nam"> Viet Nam <br/>
                                <input type="checkbox" name="partner" value="Virgin Islands (US)"> Virgin Islands (US) <br/>
                                <input type="checkbox" name="partner" value="Virgin Islands, British"> Virgin Islands, British <br/>
                                <input type="checkbox" name="partner" value="Wallis and Futuna"> Wallis and Futuna <br/>
                                <input type="checkbox" name="partner" value="Western Sahara"> Western Sahara <br/>
                                <input type="checkbox" name="partner" value="Yemen"> Yemen <br/>
                                <input type="checkbox" name="partner" value="Zambia"> Zambia <br/>
                                <input type="checkbox" name="partner" value="Zimbabwe"> Zimbabwe <br/>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" onclick="loadChart()">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" id="switchApp" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header px-4">
                        <h5 class="modal-title" id="exampleModalLabel">Select Application</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span class="material-icons ">close</span>
                        </button>
                    </div>
                    <div class="modal-body p-4">

                        <div class="row align-items-stretch app-switcher">
                            <div class="col-lg-3 col-6 mb-4">
                                <a href="index.html" class="text-dark">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <span class="material-icons md-48 " style="color:#21C3E0;">bubble_chart</span>
                                            <p class="weight-400 m-0">Dashboard</p>
                                            <small class="weight-300 text-muted">This is some text within a card body.</small>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-3 col-6 mb-4">
                                <a href="ecommerce-dashboard.html" class="text-dark">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <span class="material-icons md-48 text-primary">security</span>
                                            <p class="weight-400 m-0">Ecommerce</p>
                                            <small class="weight-300 text-muted">This is some text within a card body.</small>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-3 col-6 mb-4">
                                <a href="mailbox.html" class="text-dark">
                                    <div class="card h-100 active-app">
                                        <div class="card-body text-center">
                                            <span class="material-icons md-48 text-danger">blur_on</span>
                                            <p class="weight-400 m-0">Mail Box</p>
                                            <small class="weight-300 text-muted">This is some text within a card body.</small>
                                            <span class="material-icons app-selected md-16">check</span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-3 col-6 mb-4">
                                <a href="blogger-feed-list.html" class="text-dark">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <span class="material-icons md-48 text-warning">camera</span>
                                            <p class="weight-400 m-0">Blogger</p>
                                            <small class="weight-300 text-muted">This is some text within a card body.</small>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="assets/js/lib/moment.min.js"></script>
        <script src="assets/js/lib/jquery.min.js"></script>
        <script src="assets/js/lib/popper.min.js"></script>
        <script src="assets/js/bootstrap/bootstrap.min.js"></script>
        <script src="assets/js/chosen-js/chosen.jquery.js"></script>
        <script src="assets/js/custom.js"></script>
        <script>
            $(document).ready(function () {
                $("#longModal").modal({
                    backdrop: 'static',
                    keyboard: false
                });
            })
            
            function editChart(){
                $('#longModal').modal('show');
            }
            
            var source = []
            var target = []
            var value = []
            var label = []

            function loadChart() {
                yearSelected = document.getElementById("selection").value
                partnerList = []
                
                for (i = 0; i < document.getElementsByName("partner").length; i++) {
                    if (document.getElementsByName("partner")[i].checked == true) {
                        partnerList.push(document.getElementsByName("partner")[i].value)
                    }
                }
                retrieveImportData = []
                retrieveExportData = []
                retrieveData = []

                $.ajax({
                    url: "data/processedASEANImportData" + yearSelected + ".csv",
                    success: function (data) {
                        dataArr = data.split("|")
                        for (i = 0; i < dataArr.length; i++) { //dataArr.length
                            for (p = 0; p<partnerList.length; p++){
                                console.log(dataArr[i].split("#")[2])
                                if (dataArr[i].split("#")[2].includes(partnerList[p]) == true){
                                    retrieveImportData.push(dataArr[i].split("#"))
                                }
                            }
                        }
                    },
                });

                setTimeout(function () {
                    runProcess(retrieveImportData, retrieveExportData, yearSelected)
                    $("#longModal").modal("hide");
                }, 1000)
            }

            function runProcess(importData, exportData, yearSelected) {
                source = []
                target = []
                value = []
                label = []

                for (i = 0; i < importData.length; i++) {
                    if (label.includes(importData[i][2]) == false) {
                        label.push(importData[i][2])
                    }
                }

                for (i = 0; i < importData.length; i++) {
                    if (label.includes(importData[i][3]) == false) {
                        label.push(importData[i][3])
                    }
                }
                
                for (i = 0; i < importData.length - 1; i++) {
                    source.push(label.indexOf(importData[i][2]))
                    target.push(label.indexOf(importData[i][3]))
                    value.push(importData[i][4])
                }

                generateSankey(yearSelected)
            }

            function generateSankey(yearSelected) {
                var printDiagram = {
                    type: "sankey",
                    domain: {
                        x: [0, 1],
                        y: [0, 1]
                    },
                    orientation: "h",
                    valueformat: "###,###,###,###,###,###.0f",
                    valuesuffix: " (Thousand Dollars)",
                    node: {
                        pad: 15,
                        thickness: 15,
                        line: {
                            color: "black",
                            width: 0.5
                        },
                        label: label
                    },

                    link: {
                        source: source,
                        target: target,
                        value: value,
                        label: label
                    }
                }
                
                var printSankey = [printDiagram]
                var layout = {
                    title: "ASEAN " + yearSelected + " Trade",
                    width: 1000,
                    height: 600,
                    font: {
                        size: 10
                    }
                }
                
                Plotly.newPlot('plotlyDiv', printSankey, layout)
            }
        </script>
        <script type="text/javascript">
            // Hack to make this example display correctly in an iframe on bl.ocks.org
            d3.select(self.frameElement).style("height", "700px");
        </script> 
    </body>
</html>
